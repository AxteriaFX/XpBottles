plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

group 'me.codedred'
version "${gradle.rootProject.version}"

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8
compileJava.options.encoding = 'UTF-8'

repositories {
    mavenCentral()
}

dependencies {
    implementation project(':')
    implementation project(':v1_8_R3')
    implementation project(':v1_9_R2')
    implementation project(':v1_10_R1')
    implementation project(':v1_11_R1')
    implementation project(':v1_12_R1')
    implementation project(':v1_13_R2')
    implementation project(':v1_14_R1')
    implementation project(':v1_15_R1')
    implementation project(':v1_16_R1')
    implementation project(':v1_16_R2')
    implementation project(':v1_16_R3')
    implementation project(':v1_17_R1')
    implementation project(':v1_18_R2')
}

shadowJar {
    archiveFileName.set("${gradle.rootProject.name}-${gradle.rootProject.version}.jar")

    minimize{
        exclude(dependency(':.*'))
    }
}

task copyJars() {
    doLast {
        copy {
            from("build/libs")
            into("../build/libs")
        }
    }
}
shadowJar.finalizedBy(copyJars)
